#include <c_std.mlang>

//func shift_args(int* argc, string** argv) -> string {
//    string ret = **argv;
//    *argc -= 1;
//    *argv += 8;
//    return ret;
//}
struct TypeInfo {
    typeid id;
    int    type;
    int64  size;
    string name;
    func print() {
        c_std::printf("TypeInfo{name = %s, id = %ld, type = %d, size = %ld}\n", this.name, this.id, this.type, this.size);
    }
}
struct Vec3 {
    int x = 0; 
    int y = 0;
    int z = 0;
    func add(int amount) {
        this.x += amount;
        this.y += amount;
        this.z += amount;
    }
    func static type_info() -> TypeInfo {
        return TypeInfo{Vec3, 1, 12, "Vec3"};
    }
    func print() {
        c_std::printf("Vec3[%d, %d, %d]\n", this.x, this.y, this.z);
    }
    func init() {
        this.x = 0;
        this.y = 0;
        this.z = 0;
    }
}
func static Vec3.new() -> Vec3* {
    c_std::printf("%ld\n", Vec3.type_info().size);
    return c_std::malloc(Vec3.type_info().size);
}

const ONE = 1;

func main() {
    Vec3* v = Vec3.new();

    v.init();
    v.print();
    v.add(3);
    v.print();
}
